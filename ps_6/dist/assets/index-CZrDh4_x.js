(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const N="Task Description",g=document.querySelector("button#add-task"),d=document.querySelector("ul#tasks"),u=document.getElementById("pause-btn"),L=document.createElement("button");L.textContent="🌙 Toggle Dark Mode";L.className="dark-mode-btn";document.body.prepend(L);L.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")});let v=[],i=null,f=!1,k=0;function w(c,o=0){let s=c;const l=document.createElement("li"),e=document.createElement("span"),t=document.createElement("input"),a=document.createElement("button"),b=document.createElement("button"),m=document.createElement("span");m.className="session-counter",m.innerHTML="";for(let n=0;n<o;n++){const r=document.createElement("i");r.className="fas fa-lemon",r.style.color="#FFD700",m.appendChild(r)}m.dataset.count=o,a.textContent="▶️ start",a.className="start-btn",a.addEventListener("click",()=>F(l)),b.innerHTML="🗑️",b.className="remove-btn",b.addEventListener("click",A),t.setAttribute("type","text"),t.setAttribute("placeholder",N),l.append(e,m,a,b),d.append(l),e.addEventListener("click",D),v.push({description:s,sessionCount:o}),I(),S(s);function B(){return Array.from(d.children).indexOf(l)}function A(){l.remove();const n=B();v.splice(n,1),I()}function D(){t.value=s,e.replaceWith(t),t.focus(),t.addEventListener("keydown",n=>{n.key==="Enter"?S(t.value):n.key==="Escape"&&S(s)}),t.addEventListener("blur",()=>{S(t.value)})}function S(n){s=n,s===""?(e.textContent=N,e.classList.add("placeholder")):(e.textContent=s,e.classList.remove("placeholder")),t.replaceWith(e);const r=B();v[r].description=s,I()}function F(n){const r=document.getElementById("timer-screen"),E=document.getElementById("current-task"),M=document.getElementById("timer");r.style.display="flex",d.style.display="none",g.style.display="none",document.querySelector(".interval-settings").style.display="none",E.textContent=s,k=(document.querySelector("#work-interval").value||25)*60,f=!1,u.style.display="inline-block",u.textContent="⏸️ pause",u.onclick=function(){f=!f,u.textContent=f?"▶️ resume":"⏸️ pause"},clearInterval(i),i=setInterval(()=>{if(!f){const h=Math.floor(k/60),x=k%60;if(M.textContent=`${String(h).padStart(2,"0")}:${String(x).padStart(2,"0")}`,k--,k<0){clearInterval(i),q(),u.style.display="none";const y=n.querySelector(".session-counter");if(y){const T=(parseInt(y.dataset.count)||0)+1;y.dataset.count=T,y.innerHTML="";for(let O=0;O<T;O++){const C=document.createElement("i");C.className="fas fa-lemon",C.style.color="#FFD700",y.appendChild(C)}const H=Array.from(d.children).indexOf(n);v[H].sessionCount=T,I()}P()}}},1e3),document.getElementById("stop-btn").onclick=function(){clearInterval(i),u.style.display="none",r.style.display="none",d.style.display="block",g.style.display="block",document.querySelector(".interval-settings").style.display="flex"}}function P(){const n=document.getElementById("timer-screen"),r=document.getElementById("current-task"),E=document.getElementById("timer");r.textContent="Break time! 💥";let p=(document.querySelector("#break-interval").value||5)*60;clearInterval(i),i=setInterval(()=>{const h=Math.floor(p/60),x=p%60;E.textContent=`${String(h).padStart(2,"0")}:${String(x).padStart(2,"0")}`,p--,p<0&&(clearInterval(i),E.textContent="Break over! 🎉",q(),setTimeout(()=>{n.style.display="none",d.style.display="block",g.style.display="block",document.querySelector(".interval-settings").style.display="flex"},2e3))},1e3),document.getElementById("stop-btn").onclick=function(){clearInterval(i),n.style.display="none",d.style.display="block",g.style.display="block",document.querySelector(".interval-settings").style.display="flex"}}}function q(){new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(o=>console.log("Sound play blocked:",o))}function I(){localStorage.setItem("tasks",JSON.stringify(v))}function $(){const c=localStorage.getItem("tasks");return c?JSON.parse(c):[]}g.addEventListener("click",()=>w(""));window.addEventListener("DOMContentLoaded",()=>{const c=$();for(const o of c)w(o.description,o.sessionCount||0)});
